!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.parser=t():e.parser=t()}(self,(()=>(()=>{"use strict";var e={601:(e,t,n)=>{n.r(t),n.d(t,{checkScrollPosition:()=>c,debug_console_log:()=>o,formatLink:()=>u,getActiveScrollPosition:()=>a,getScrollableParent:()=>l,logPerformance:()=>i});var r=!1;function o(){var e;r&&(e=console).log.apply(e,arguments)}function i(e,t){var n=performance.now()-t;return console.log("Crawl ðŸ•’ ".concat(e,": ").concat(n.toFixed(2),"ms")),n}function l(e){for(var t=e;t&&t!==document.body;){var n=window.getComputedStyle(t).overflowY;if(o("Current Element",t),("auto"===n||"scroll"===n)&&t.scrollHeight>t.clientHeight)return t;t=t.parentElement}return window}function a(e){if("undefined"==typeof window)return[!1,!1];try{var t=document.activeElement;o("active scroll elements",t),o("scrollable element",e),t&&"iframe"===t.tagName.toLowerCase()?t=e&&"iframe"!==e.tagName.toLowerCase()?e:document.body:t&&!isTextElement(t)||(t=document.body),o("active element",t,document.body);var n=t===document.body;return o("isBody scroll element",n),c(n?window:l(t,document),document)}catch(e){return o("Error in getActiveScrollPosition:",e),[!1,!1]}}function u(e){if("undefined"==typeof window)return null;if(!window.location||!window.location.hostname)return null;var t=window.location.hostname;if(!e||""===e.trim()||e.startsWith("javascript"))return null;var n=e.trim();try{n.startsWith("#")?n=new URL(n,window.location.href).toString():n.startsWith("//")?n=n.replace(/^\/\//,"https://"):n.startsWith("http")||n.startsWith("https")||n.startsWith("data:")||n.startsWith("www.")||n.startsWith("mailto:")||(n=new URL(n,"https://".concat(t)).toString());var r=new URL(n);return r.hostname===t&&r.pathname.startsWith("/".concat(t))&&(r.pathname=r.pathname.substring(t.length+1)),r.pathname=r.pathname.replace(/\/+/g,"/"),"/"===r.pathname&&(r.pathname=""),r.toString()}catch(e){return null}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{if("undefined"==typeof window)return[!1,!1];var t=e===window,n=t?window.scrollY||document.documentElement.scrollTop:"scrollTop"in e?e.scrollTop:0,r=t?document.documentElement.scrollHeight:"scrollHeight"in e?e.scrollHeight:0,o=t?window.innerHeight:e.clientHeight;return[0===n,Math.ceil(n+o)>=r]}catch(e){return console.error("Error checking scroll position:",e),[!1,!1]}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{Crawl:()=>X,common:()=>o,crawlEvaluate:()=>Y,segment:()=>i,utils:()=>l});var o={};n.r(o),n.d(o,{NUM_PAGE_ELEMENTS_KEPT:()=>te,getPageContent:()=>ne,getProcessedElement:()=>oe,process_page:()=>re});var i={};n.r(i),n.d(i,{DrawCrawl:()=>xe,Segment:()=>be,SegmentGroups:()=>pe,Segments:()=>ge,drawSegments:()=>ye});var l=n(601);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return void 0!==e.multion_idx||console.error("Node has no ID:",e,e.multion_idx),e.multion_idx}function d(e,t){if(!e.attributes)return null;var n,r=a(e.attributes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.name===t)return o.value}}catch(e){r.e(e)}finally{r.f()}return null}function s(e,t){var n={};if(e&&e.nodeType===Node.ELEMENT_NODE){var r,o=a(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,l=e.getAttribute(i);null!==l&&(n[i]=l)}}catch(e){o.e(e)}finally{o.f()}}return n}function f(e){if("undefined"==typeof document)return"";if(""!==e.id)return'id("'.concat(e.id,'")');if(e===document.body)return e.tagName;for(var t=0,n=e.parentNode.childNodes,r=0;r<n.length;r++){var o=n[r];if(o===e)return"".concat(f(e.parentNode),"/").concat(e.tagName,"[").concat(t+1,"]");v(o)&&o.tagName===e.tagName&&t++}}var m={a:"link",input:"input",textarea:"input",select:"select",img:"img",li:"li",button:"button",option:"button",iframe:"button"};function h(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"button":m[e]||"text"}function v(e){return e&&e.nodeType===Node.ELEMENT_NODE}var b={"www.ubereats.com":{modal:["cart","aside"]},"www.zillow.com":{modal:["layout-container-desktop"]},"www.amazon.com":{modal:["hmenu-container"]}};function g(e,t,n,r){return""!==r?"<".concat(_(e)," id=").concat(t).concat(n,">").concat(r,"/>"):"<".concat(_(e)," id=").concat(t).concat(n,"/>")}function p(e,t,n,r,o){var i=g(t,n,r,o);e.push(i)}function y(e){return{x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left}}function _(e){if(e){var t,n=e.startsWith("active-"),r=e.startsWith("modal-");return t="img"==(e=n?e.split("active-")[1]:r?e.split("modal-")[1]:e)?"img":"li"==e?"li":e.substring(0,1),n?"active-"+t:r?"modal-"+t:t}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n,r,o){if(!r)return(0,l.debug_console_log)("Attempted to add undefined node to hash tree"),[!1,null];if(c(r)in e)return e[c(r)];var i=r.parentNode;!(c(i)in e)&&i&&i.nodeName&&x(e,t,i.nodeName.toLowerCase(),i,o);var u=w(e[c(i)]||[!1,null],2),d=u[0],f=u[1],m=v(r)?s(r,["id","role","href","contenteditable","aria-modal","data-test","data-testid","aria-label","title"]):{},h=[!1,null];if("z_index"===t)if(v(r)){var g=(null==o?void 0:o.getComputedStyle(r)).getPropertyValue("z-index");if(g&&"auto"!==g){if(2147483647===(h=[parseInt(g,10),r])[0]&&"id"in r&&"multion-root-123098"!==r.id){(0,l.debug_console_log)("Got max z-index",t,r),r.style.zIndex=h[0]-1;var p=(null==o?void 0:o.getComputedStyle(r)).getPropertyValue("z-index");(0,l.debug_console_log)("lowered z-index",t,r,p)}}else{var y=e[c(i)];h=[y[0],y[1]]}}else{var _=e[c(i)];h=[_[0],_[1]]}else h=n===t||m.role===t||"contenteditable"===t&&"true"===m.contenteditable||"modal"===t&&function(e,t,n){if(!e)return!1;if("modal"===e||"true"===t["aria-modal"])return!0;if("dialog"===e||"dialog"===t.role)return!0;if(void 0===n)return!1;if(n&&n.location.hostname in b){var r,o=a(b[n.location.hostname].modal);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(Object.values(t).includes(i)||e===i||Object.values(t).includes("modal")||Object.values(t).includes("dialog"))return!0}}catch(e){o.e(e)}finally{o.f()}}return!1}(n,m,o)?"a"!==t||"href"in m?[!0,r]:[!1,null]:d&&("span"!==t&&"p"!==t||"#text"===n||"b"===n||"i"===n||"u"===n||"em"===n||"strong"===n||"code"===n)?[!0,f]:[!1,null];return e[c(r)]=h,h}function N(e,t,n,r){if(c(t)in e)return e[c(t)]||[!1,null];var o=t.parentNode;c(o)in e||o&&N(e,o,n,r);var i=w(e[c(o)]||[!1,null],2),l=i[0],a=i[1],u=[!1,null];return n(t)?u=[!0,t]:l&&(u=[!0,a]),e[c(t)]=u,u}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var A={},I={},O={},C=!1;function k(e,t,n,r){function o(e){var t;return e.classList&&(null===(t=e.classList)||void 0===t?void 0:t.contains("cm-line"))}function i(e){return"li"===e.nodeName.toLowerCase()}if(!C)return(0,l.debug_console_log)("Overleaf parser not loaded"),n;var a=S(add_to_hash_tree_with_cond(A,t,o,r),2),u=a[0],c=(a[1],S(add_to_hash_tree_with_cond(I,t,i,r),2)),d=c[0],s=(c[1],S(add_to_hash_tree_with_cond(O,t,(function(e){var t;return e.classList&&(null===(t=e.classList)||void 0===t?void 0:t.contains("pdfViewer"))}),r),2)),f=s[0];s[1];return u&&(0,l.debug_console_log)("Is line parent",o(t),t),o(t)||i(t)?t.innerText:u|d|f?"multion_skip":n}function L(e,t,n,r){return"placeYourOrder1"===t.name?(n="place your order",r=!1):"id"in t&&t.id.includes("native_dropdown_selected_size_name")&&(r=!1),[n,r]}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=M(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var R=!0,H=!0,U=new Set(["html","head","title","meta","body","script","style","path","br","::marker","#comment","code","noscript"]),B=["id","name","type","role","placeholder","aria-label","title","alt","value"],W=["id","name","type","role","href","placeholder","aria-label","title","alt","disabled","src","data-test","color","value"];function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!("getBoundingClientRect"in e))return!1;var n=e.getBoundingClientRect(),r=(null==t?void 0:t.innerHeight)||document.documentElement.clientHeight,o=(null==t?void 0:t.innerWidth)||document.documentElement.clientWidth,i=n.top+n.height/2>=0&&n.left+n.width/2>=0&&n.bottom-n.height/2<=r&&n.right-n.width/2<=o,l=n.width>0&&n.height>=0;return i&&l}function F(e,t){if(!v(e))return!1;var n=null==t?void 0:t.getComputedStyle(e);return"none"===(null==n?void 0:n.display)||"hidden"===(null==n?void 0:n.visibility)}function G(e){return!(!e||!e.nodeName)&&(e.nodeType!==Node.TEXT_NODE&&(null!=e.getAttribute("onclick")||null!=e.getAttribute("href")||"button"===e.getAttribute("role")||"listitem"===e.getAttribute("role")||"menuitem"===e.getAttribute("role")||"listbox"===e.getAttribute("aria-haspopup")||"option"==e.nodeName.toLowerCase()||"select"==e.nodeName.toLowerCase()))}function K(e,t,n){return t!==n&&t!==n.body&&!!t.contains(e)}function V(e,t){return!(!(c(e)in t)||!t[c(e)][0])}function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:H,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u={},m={},b=[],g=e.documentElement;null!==n&&((0,l.debug_console_log)("specific element",n),g=n),g.multion_idx=0;var _=[],w=[];!function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r.multion_idx=i++,_.push(r);for(var a=function(e){return e.nodeName&&e.nodeName.toLowerCase()in U&&"id"in e&&"multion-root-123098"===e.id?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},u=o?function(e){var t=a(e);return t===NodeFilter.FILTER_ACCEPT?o(e):t}:a,c=e.createTreeWalker(r,NodeFilter.SHOW_ALL,{acceptNode:u});c.nextNode();){var d,s=c.currentNode;if(s.multion_idx=i++,"IMG"===s.nodeName&&s.currentSrc&&(s.src=s.currentSrc),w.push(s),null!==(d=s)&&void 0!==d&&d.shadowRoot&&(i=n(s.shadowRoot,i)),"IFRAME"===s.tagName)try{if(new URL(s.src).origin!==t.location.origin){(0,l.debug_console_log)("Cross-origin iframe found");continue}i=n(s.contentDocument.documentElement,i)}catch(e){(0,l.debug_console_log)("Cross-origin iframe found: "+e.message)}}return i}(g,0);var E=e.activeElement,S={},T={},M={},P={},X={},$={},Q={},q={},Y={},J={},Z={},ee={},te={};function ne(e){try{S[c(e)]=[!1,null],T[c(e)]=[!1,null],M[c(e)]=[!1,null],P[c(e)]=[!1,null],X[c(e)]=[!1,null],$[c(e)]=[!1,null],Q[c(e)]=[!1,null],q[c(e)]=[!1,null],Y[c(e)]=[!1,null],Z[c(e)]=[!1,null],ee[c(e)]=[!1,null],te[c(e)]=[!1,null],J[c(e)]=[!1,null],function(e){(0,l.debug_console_log)("Overleaf parser loaded"),A[multion_uuid(e)]=[!1,null],I[multion_uuid(e)]=[!1,null],O[multion_uuid(e)]=[!1,null],C=!0}(e)}catch(t){(0,l.debug_console_log)("Error in init_ancestry:",t),(0,l.debug_console_log)("root_node:",e),(0,l.debug_console_log)("multion_uuid function:",c)}}for(var re=0;re<_.length;re++)ne(_[re]);for(var oe=performance.now(),ie=(null==t?void 0:t.location.href)||"",le=ie.includes("overleaf.com"),ae=ie.includes("amazon."),ue=(ie.includes("/maps/reserve"),ie.includes("lyft.com/concierge"),0);ue<w.length;ue++){var ce=w[ue];if(null!=ce&&ce.nodeName){ce.multion_node_label=-1;var de=ce.nodeName.toLowerCase(),se=ce.nodeType;if(!(se===Node.DOCUMENT_FRAGMENT_NODE||U.has(de)||se===Node.TEXT_NODE&&U.has(ce.parentNode.nodeName.toLowerCase()))){var fe="input"===de?d(ce,"value"):ce.nodeValue,me=j(x(q,"modal",de,ce,t),2),he=(me[0],me[1],j(x(S,"a",de,ce,t),2)),ve=he[0],be=he[1],ge=j(x(T,"button",de,ce,t),2),pe=ge[0],ye=ge[1],_e=j(x(M,"option",de,ce,t),2),we=_e[0],Ee=_e[1],xe=j(x(P,"select",de,ce,t),2),Ne=xe[0],Se=xe[1],Te=j(x(X,"contenteditable",de,ce,t),2),Ae=Te[0],Ie=Te[1],Oe=j(x($,"span",de,ce,t),2),Ce=Oe[0],ke=Oe[1],Le=j(x(Q,"p",de,ce,t),2),De=Le[0],je=Le[1],Me=j(x(Y,"z_index",de,ce,t),2),Pe=Me[0],Re=(Me[1],j(x(Z,"li",de,ce,t),2)),He=Re[0],Ue=Re[1],Be=j(x(ee,"input",de,ce,t),2),We=Be[0],ze=Be[1],Fe=j(x(te,"div",de,ce,t),2),Ge=Fe[0],Ke=Fe[1],Ve=N(J,ce,(function(e){return"true"===d(e,"aria-hidden")}),t),Xe=j(Ve,2),$e=Xe[0];Xe[1];if(!le||"multion_skip"!==(fe=k(0,ce,fe))){if(ae){var Qe=j(L(0,ce,fe,$e),2);fe=Qe[0],$e=Qe[1]}var qe=ce;ce.nodeType===Node.TEXT_NODE&&(qe=ce.parentNode);var Ye=z(qe);if(null===n){if(F(qe))continue;var Je=null==t?void 0:t.location.href.includes("/maps/reserve"),Ze=null==t?void 0:t.location.href.includes("lyft.com/concierge");if(r&&!Ye&&!Je)continue;var et=ce.textContent.includes("Round trip")||ce.textContent.includes("One way")||ce.textContent.includes("Multi-city"),tt="img"===de&&ce.src&&ce.alt;if(i&&$e&&!tt&&!et&&!Je&&!Ze)continue;if(Je){if(v(ce)&&ce.hasAttribute("disabled")){(0,l.debug_console_log)("skipping node unavailable",ce,fe,ue);continue}if(v(ce)&&"wQNmvb"===ce.getAttribute("jsname")){(0,l.debug_console_log)("skipping node unavailable",ce,fe,ue);continue}if(v(ce)&&"V67aGc"===ce.getAttribute("jsname")){(0,l.debug_console_log)("skipping node unavailable",ce,fe,ue);continue}}}var nt=new Set,rt=v(ce)?s(ce,W):{};"input"===de&&(rt=v(ce)?s(ce,B):{});var ot=ve||pe||we||Ne||Ae||Ce||He||We||De||Ge,it=null;ot&&(ve?it=be:pe?it=ye:We?it=ze:we?it=Ee:Ne?it=Se:Ae?it=Ie:Ce?it=ke:Ge?it=Ke:He?it=Ue:De&&(it=je));var lt=null;if(ot&&(c(it)in m||(m[c(it)]=[]),lt=m[c(it)]),void 0!==rt.id&&((0,l.debug_console_log)("element_attributes id :",rt.id),delete rt.id),se===Node.TEXT_NODE&&ot){var at=ce.nodeValue;if("|"===at||"â€¢"===at)continue;lt.push({type:"type",value:at,node_name:de,node_id:c(ce)})}else{"input"===de&&"submit"===rt.type||"button"===de||"button"===rt.role||"option"===de||"option"===rt.role?(de="button",delete rt.type,"button"===rt.role&&delete rt.role):("a"===de||"div"===de&&"link"===rt.role||"span"===de&&"link"===rt.role)&&(de="a","link"===rt.role&&delete rt.role);for(var ut=0,ct=Object.keys(rt);ut<ct.length;ut++){var dt=ct[ut];ot&&lt.push({type:"attribute",key:dt,value:rt[dt],node_name:de,node_id:c(ce)}),nt.add([dt,rt[dt]])}}"|"===fe||("input"!==ce.nodeName.toLowerCase()||fe?"checkbox"!==rt.role||fe?Ie?(de="input",fe=ce.textcontent?ce.textcontent:" ",nt.add(["aria-label","Contenteditable Input"])):"textarea"!==de||fe?"select"!==de||fe||(fe=ce.options&&ce.selectedIndex>=0?ce.options[ce.selectedIndex].text:""):fe=ce.value:((0,l.debug_console_log)("Got node with role checkbox: ",ce.value,ce),fe="true"===ce.getAttribute("aria-checked")?"checked":"false"===ce.getAttribute("aria-checked")?"unchecked":ce.checked?"checked":"unchecked"):(fe=ce.value,"checkbox"===rt.type&&(fe=ce.checked?"checked":"unchecked"),"radio"===rt.type&&(fe=ce.checked?"checked":"unchecked"))),!ot||"a"===de||"button"===de||"select"===de||"span"===de||"p"===de||"option"===de||"li"===de||"input"===de||"textarea"===de||"div"===de||"iframe"===de||"img"===de&&("img"!==de||ce.src)||ce===Ie?Ae&&"span"===de?ce.multion_node_label=it.multion_idx:("li"===de&&(rt.role||null!=t&&t.location.href.includes("google.com/travel")||(ce.multion_node_label=it.multion_idx)),ce.multion_node_label=ce.multion_idx,b.push({node_id:c(ce),node_name:de,node_element:ce,node_value:fe,node_meta:nt,is_clickable:G(ce),z_index:Pe})):ce.multion_node_label=it.multion_idx}}}}(0,l.logPerformance)("DOM elements Processing",oe);for(var st=performance.now(),ft=[],mt=[],ht=[],vt={},bt={},gt=new Set,pt=0,yt=0,_t=new Set(b.map((function(e){return e.node_id}))),wt={},Et=0,xt=b;Et<xt.length;Et++){var Nt,St=xt[Et],Tt=St.node_id,At=St.node_name,It=St.node_value,Ot=St.is_clickable;if("string"!=typeof(null==St||null===(Nt=St.node_element)||void 0===Nt?void 0:Nt.id)||!St.node_element.id.includes("multion-")){var Ct=new Set(Array.from(St.node_meta).map((function(e){var t=j(e,2),n=t[0],r=t[1];if("href"===n||"src"===n){if(!a)return null;bt[pt]=(0,l.formatLink)(r)||r,gt.add(r),r="<link_".concat(pt," (").concat(bt[pt].slice(0,50),")>"),pt+=1}return"".concat(n,'="').concat(r,'"')}))),kt=St.node_element,Lt=It?"".concat(It," "):"",Dt="";if(Tt in m){var jt,Mt=D(m[Tt]);try{for(Mt.s();!(jt=Mt.n()).done;){var Pt=jt.value;if(!(Pt.node_id!==Tt&&_t.has(Pt.node_id))){var Rt=Pt.type,Ht=Pt.value;if("attribute"===Rt){var Ut=Pt.key;"href"!==Ut&&"src"!=Ut||(!gt.has(Ht)&&a?(bt[pt]=(0,l.formatLink)(Ht)||Ht,gt.add(Ht),Ht="<link_".concat(pt," (").concat(bt[pt].slice(0,50),")>"),pt+=1):Ut=null),Ut&&Ct.add("".concat(Ut,'="').concat(Ht,'"'))}else Lt+="".concat(Ht," ")}}}catch(e){Mt.e(e)}finally{Mt.f()}}if(Ct.size>0){var Bt=Array.from(Ct).join(" ");Dt=" ".concat(Bt)}""!==Lt&&(Lt="".concat(Lt.trim()));var Wt=h(At,Ot);if("input"==Wt)try{kt.nodeType===Node.ELEMENT_NODE&&kt.hasAttribute("placeholder")&&""===Lt?Lt=kt.getAttribute("placeholder"):""===Lt&&(Lt=" ")}catch(e){Lt=" "}"select"==Wt&&""===Lt&&(Lt=" "),"link"!==Wt||""!==Lt||""!==Dt?"button"===Wt&&""!==Dt||"input"===Wt||"select"===Wt||"img"===Wt||"textarea"===Wt||"option"===Wt||""!==Lt?(St.node_element.id_counter=yt,u[yt]=St,wt&&wt.inner_text===Lt&&wt.node_name===Wt&&"text"===wt.node_name||(wt.inner_text=Lt,wt.node_name=Wt,K(kt,E,e)?p(mt,Wt="active-"+Wt,yt,Dt,Lt):V(kt,q)?p(ht,Wt="modal-"+Wt,yt,Dt,Lt):p(ft,Wt,yt,Dt,Lt),v(St.node_element)&&(kt.bbox=y(St.node_element.getBoundingClientRect()),kt.xpath=f(St.node_element)),vt[yt]=kt,yt++)):kt.multion_node_label=kt.parentNode.multion_node_label:(0,l.debug_console_log)("skipping duplicate text node",Wt,Lt,Dt)}}return(0,l.logPerformance)("Elements of interest",st),[ft,mt,ht,vt,bt]}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}"undefined"!=typeof window&&(window.crawl=X);var q=["www.uber.com","www.ubereats.com","www.doordash.com","www.apartments.com","www.zillow.com","www.expedia.com","www.airbnb.com"];function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=e.url,o=e.hide_not_in_viewpoint,i=e.hide_aria_hidden,a=e.specific_element_xpath,u=(e.dom_stabilization_timeout,e.show_link_preview),c=e.window_height,d=e.window_width,s=performance.now(),f=a?t.querySelector("[multion_id='".concat(a,"']")):null;f instanceof Node||(f=null),!r&&n.location&&(r=n.location.href),c&&(n.innerHeight=c),d&&(n.innerWidth=d);var m=X(t,n,f,o,null,i,null!=u&&u);(0,l.logPerformance)("Initial Crawl",s);var h=performance.now(),v=$(m,5),b=v[0],g=v[1],p=v[2],y=v[3],_=v[4],w={},E={},x=r||n.location.href;t.querySelectorAll("[multion_id]").forEach((function(e){return e.removeAttribute("multion_id")}));for(var N=0,S=Object.entries(y);N<S.length;N++){var T=$(S[N],2),A=T[0],I=T[1];if(w[A]=I.bbox||{},E[A]=I.xpath||"",3!=I.nodeType)I.setAttribute("multion_id",A);else{for(var O=I.parentNode;O&&3==O.nodeType;)O=O.parentNode;O&&!Object.values(y).includes(O)&&O.setAttribute("multion_id",A)}}return(0,l.logPerformance)("Update DOM",h),function(e){var t,n,r=e.dom,o=e.active_elements,i=e.modal_elements,a=e.boundingBoxes_dict,u=e.xpath_dict,c=e.currentUrl,d=e.hide_not_in_viewpoint,s=e.link_dict,f=e.window,m=e.document,h=r,v=r,b=c?new URL(c).hostname:"",g=q.some((function(e){return b.includes(e)}));if(i.length>0&&g&&d){h=o.concat(i);var p=$((0,l.getActiveScrollPosition)(i[0],f,m),2);t=p[0],n=p[1]}else{h=o.concat(i,r);var y=$((0,l.checkScrollPosition)(f),2);t=y[0],n=y[1]}return t||h.unshift("<scroll up>"),n||h.push("<scroll down>"),{dom:h,base_dom:v,active_elements:o,modal_elements:i,bounding_boxes:a,xpath_dict:u,link_dict:s,url:c}}({dom:b,active_elements:g,modal_elements:p,boundingBoxes_dict:w,xpath_dict:E,currentUrl:x,hide_not_in_viewpoint:o,link_dict:_,win:n,doc:t})}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}"undefined"!=typeof window&&(window.crawlEvaluate=Y);var te=500;function ne(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=localStorage.getItem("selected_elem_xpath"),r={ELEMENT_CLICKED_DONT_HIDE:null};if(n){var o=document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;r.ELEMENT_CLICKED_DONT_HIDE=o}(0,l.debug_console_log)("selected_elem_common",r);var i=null;null!==r.ELEMENT_CLICKED_DONT_HIDE&&((0,l.debug_console_log)("ELEMENT_CLICKED_DONT_HIDE_not_null",ee(r.ELEMENT_CLICKED_DONT_HIDE),r.ELEMENT_CLICKED_DONT_HIDE),r.ELEMENT_CLICKED_DONT_HIDE instanceof Node&&(i=r.ELEMENT_CLICKED_DONT_HIDE));var a=X(document,window,i,e,null,t);r.ELEMENT_CLICKED_DONT_HIDE=null,localStorage.clear();var u=checkScrollPosition(),c=u.isAtTop,d=u.isAtBottom;(0,l.debug_console_log)("parse(document.body)",a);var s=window.location.href,f=J(a,5);return[f[0],f[1],f[2],f[3],f[4],s,c,d]}function re(e){var t=J(e,8),n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=t[6],d=t[7],s=n,f=u?new URL(u).hostname:"",m=q.some((function(e){return f.includes(e)}));s=o.length>0&&m?o:o.concat(r,n),c||s.unshift("<scroll up>"),d||s.push("<scroll down>");var h=s.join("\n");return(0,l.debug_console_log)("Got active elements:",h),{node_dict:i,link_dict:a,dom:h,active_elements:r,modal_elements:o,url:u}}function oe(e,t){var n,r,o,i,l=null!==(n=e.innerText)&&void 0!==n?n:"",a=g(h(null==e||null===(r=e.nodeName)||void 0===r?void 0:r.toLowerCase()),t,"",l),u=y(e.bbox);return{parsedHtml:a,nodeObj:{id_counter:t,multion_idx:null!==(o=null==e?void 0:e.multion_node_label)&&void 0!==o?o:-1,multion_node_label:null!==(i=null==e?void 0:e.multion_node_label)&&void 0!==i?i:-1,bbox:u}}}var ie="production"!=="production".toLowerCase();function le(){var e;ie&&(e=console).log.apply(e,arguments)}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function ce(e,t){if(e){if("string"==typeof e)return de(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ve(r.key),r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ve(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==se(t)?t:t+""}var be=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;fe(this,e),this.el=t,this.custom_id=n,this.bbox=this.getBoundingBox(t),this.label=this.getLabel(t),this.description=this.getDescription(t),0!==r&&(this.bbox.y+=r)}return he(e,[{key:"getBoundingBox",value:function(e){return e.getBoundingClientRect()}},{key:"getLabel",value:function(e){var t={tagName:e.tagName.toUpperCase(),parentTagName:e.parentElement.tagName.toUpperCase(),classlist:e.classList,hasText:""!==e.textContent.trim(),el:e},n={TEXT:0,CODE:1,LINK:2,IMAGE:3,VIDEO:4,AUDIO:5,BUTTON:6,INPUT:7,FORM:8,QUOTE:9,CUSTOM:10,ICON:11,HEADER:12,SUBMIT:13,FOOTER:14,NAV:15};return"LI"===e.tagName?n.BUTTON:this.isHeader(t)?n.HEADER:this.isCode(t)?n.CODE:this.isQuote(t)?n.QUOTE:this.isList(t)?n.LIST:this.isButton(t)?n.BUTTON:this.isLink(t)?n.LINK:this.isInput(t)?n.INPUT:this.isText(t)?n.TEXT:this.isImage(t)?n.IMAGE:this.isIcon(t)?n.ICON:this.isCustom(t)?n.CUSTOM:["VIDEO","AUDIO","FORM","NAV","FOOTER"].includes(t.tagName)?n[t.tagName]:t.tagName}},{key:"isClickable",value:function(e){var t=null!=e.getAttribute("onclick")||null!=e.getAttribute("href");return!!t||(e.parentElement&&(t=this.isClickable(e.parentElement)),t)}},{key:"isButton",value:function(e){var t=e.tagName,n=e.classlist,r=e.el.getAttribute("role"),o=window.getEventListeners&&window.getEventListeners(e.el).click,i="INPUT"==t&&"button"==e.el.getAttribute("type");return"BUTTON"==t||"button"==r||"menuitem"==r||"SELECT"==t||"OPTION"==t||i||"A"==t&&(n.contains("btn")||n.contains("button"))||o}},{key:"isInput",value:function(e){var t=e.tagName;return"INPUT"==t||"TEXTAREA"==t}},{key:"isCustom",value:function(e){e.tagName;return null}},{key:"isText",value:function(e){var t=e.tagName,n=e.hasText,r=e.el.nodeType===Node.TEXT_NODE;return n&&("P"==t||"SPAN"==t||"ABBR"==t||"LABEL"==t||"DIV"==t||"LI"==t||r)}},{key:"isLink",value:function(e){var t=e.tagName,n=e.parentTagName,r=e.classlist;return"A"==t&&!r.contains("btn")&&!r.contains("button")||"A"==n&&("P"==t||"SPAN"==t||"ABBR"==t||"ADDRESS"==t)||"CITE"==t}},{key:"isHeader",value:function(e){var t=e.tagName,n=e.parentTagName,r=e.hasText,o=r&&("H1"==t||"H2"==t||"H3"==t||"H4"==t||"H5"==t||"H6"==t);return o||r&&("H1"==n||"H2"==n||"H3"==n||"H4"==n||"H5"==n||"H6"==n)}},{key:"isCode",value:function(e){var t=e.tagName;return"PRE"==t||"CODE"==t}},{key:"isQuote",value:function(e){return"BLOCKQUOTE"==e.tagName}},{key:"isImage",value:function(e){var t=e.tagName,n=e.el;if("IMG"==t||"SVG"==t&&this.bbox.height*this.bbox.width>800)return!0;if("url"==window.getComputedStyle(n).backgroundImage.slice(0,3)){var r=window.getComputedStyle(n).backgroundImage.slice(4,-1).replace(/"/g,"").split(".").pop();if(["jpg","png","gif","jpeg","webp"].includes(r))return!0}return!1}},{key:"isIcon",value:function(e){var t=e.tagName,n=e.el,r="SVG"==t,o=this.bbox.height*this.bbox.width<800;if("KBD"==t||r&&o)return!0;if(!("url"==window.getComputedStyle(n).backgroundImage.slice(0,3)))return!1;var i=window.getComputedStyle(n).backgroundImage.slice(4,-1).replace(/"/g,"").split(".").pop();return!("svg"!=i&&!i.startsWith("data"))||void 0}},{key:"isList",value:function(e){var t=e.tagName;return"TABLE"==t||"UL"==t||"OL"==t||"DL"==t}},{key:"getDescription",value:function(e){return e.getAttribute("aria-label")?e.getAttribute("aria-label"):e.getAttribute("alt")?e.getAttribute("alt"):e.getAttribute("role")?e.getAttribute("role"):""}},{key:"getSegmentFromPoint",value:function(t){for(var n=this.bbox.x+this.bbox.width/2,r=this.bbox.y+this.bbox.height/2,o=0;this.bbox.y>o+t;)o+=t;window.scrollY!=o&&window.scrollTo(0,o);var i=document.elementFromPoint(n,r-o);return!!i&&new e(i,this.custom_id,o)}},{key:"replaceWithSegmentFromPoint",value:function(e){var t=this.getSegmentFromPoint(e);return!1!==t&&(this.el=t.el,this.bbox=t.bbox,this.label=t.label,!0)}},{key:"serialize",value:function(){return{label:this.label,bbox:{x:this.bbox.x,y:this.bbox.y,width:this.bbox.width,height:this.bbox.height},description:this.description,custom_id:this.custom_id}}}])}(),ge=function(){function e(t){fe(this,e),this.segments=t||[]}return he(e,[{key:"add",value:function(e){return this.segments.push(e),this}},{key:"sort",value:function(){return this.segments.sort((function(e,t){return e.bbox.y-t.bbox.y})),this}},{key:Symbol.iterator,value:function(){var e=-1,t=this.segments;return{next:function(){return{value:t[++e],done:!(e in t)}}}}},{key:"uniquify",value:function(){var t,n=[],r=new Set,o=ue(this.segments);try{for(o.s();!(t=o.n()).done;){var i=t.value,l=i.bbox.x+"_"+i.bbox.y+"_"+i.bbox.width+"_"+i.bbox.height;r.has(l)||(n.push(i),r.add(l))}}catch(e){o.e(e)}finally{o.f()}return new e(n)}},{key:"replaceWithSegmentFromPoint",value:function(e){var t,n=ue(this.segments);try{for(n.s();!(t=n.n()).done;){t.value.replaceWithSegmentFromPoint(e)}}catch(e){n.e(e)}finally{n.f()}return this}},{key:"serialize",value:function(){var e,t=[],n=ue(this.segments);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.serialize())}}catch(e){n.e(e)}finally{n.f()}return t}}])}(),pe=function(){return he((function e(t){fe(this,e),this.groups=[],this.segments=t||new ge}),[{key:"group",value:function(e){var t,n=new ge,r=0,o=ue(this.segments);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.bbox.y<r+e?(i.bbox.y-=r,n.add(i)):(this.groups.push(n),n=new ge,r+=e)}}catch(e){o.e(e)}finally{o.f()}return this.groups.push(n),this}},{key:"serialize",value:function(){var e,t=[],n=ue(this.groups);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.serialize())}}catch(e){n.e(e)}finally{n.f()}return t}}])}();function ye(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=function(e,t){var n,r=t.getContext("2d"),o=[],i=0,l=ue(e);try{for(l.s();!(n=l.n()).done;){var a,u=ue(n.value);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(c.label!=LABELS.CUSTOM){var d=c.bbox,s=i.toString()+" "+Object.keys(LABELS)[c.label];i++;var f=6,m=r.measureText(s).width+f,h=12+f,v={x:d.x+2,y:d.y-h-2,width:m,height:h};v=Ee(v,o,t,d,h),o.push({bbox:d,textRect:v,text:s,color:we(COLORS[c.label],.8)})}}}catch(e){u.e(e)}finally{u.f()}0}}catch(e){l.e(e)}finally{l.f()}return o}(t,e,n),a=ue(l);try{for(a.s();!(r=a.n()).done;){var u=r.value;_e(e,u.bbox.x,u.bbox.y,u.bbox.width,u.bbox.height,u.text,u.color,"top",6,u.textRect.x,u.textRect.y)}}catch(e){a.e(e)}finally{a.f()}o&&saveCanvas(e,i)}function _e(e,t,n,r,o,i,l){var a=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;if(!i||!i.endsWith("TEXT")){var d=e.getContext("2d");if(d.globalAlpha=.2,d.fillStyle=l,d.globalAlpha=1,d.globalAlpha=.6,d.strokeStyle=l,d.lineWidth=2,d.setLineDash([6,3]),d.strokeRect(t,n,r,o),d.setLineDash([]),i){d.font="12px Arial",d.textBaseline="top",d.padding="2px 4px";var s=d.measureText(i).width+a,f=12+a;d.fillStyle=l,d.fillRect(u,c,s,f),d.fillStyle="white",d.fillText(i,u+a,c+a)}}}function we(e,t){try{t=Math.max(0,Math.min(1,t));var n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return n=Math.floor(n*t),r=Math.floor(r*t),o=Math.floor(o*t),"#"+n.toString(16).padStart(2,"0")+r.toString(16).padStart(2,"0")+o.toString(16).padStart(2,"0")}catch(t){return le("SOMEHTING WENT WRONG MAKING IT DARKER"),e}}function Ee(e,t,n,r,o){null!=e&&e.y&&e.y-e.height<0&&(e.y+=o/2),(null==e?void 0:e.x)+e.width>screen.width&&(e.x-=e.width/3);var i,l,a,u,c,d=ue(t);try{for(d.s();!(i=d.n()).done;)for(var s=i.value;l=e,a=s.textRect,u=void 0,c=void 0,u=l.x+l.width<=a.x||a.x+a.width<=l.x,c=l.y+l.height<=a.y||a.y+a.height<=l.y,!u&&!c;)e.y+=o}catch(e){d.e(e)}finally{d.f()}var f=Math.max(0,Math.min(e.x+e.width,r.x+r.width)-Math.max(e.x,r.x))*Math.max(0,Math.min(e.y+e.height,r.y+r.height)-Math.max(e.y,r.y)),m=e.width*e.height,h=r.width*r.height;return(2*f>m||2*f>h)&&(e.y+=r.height),e}function xe(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=new ge,a=ae(X(e,t,null,HIDE_NOT_IN_VIEWPOINT,null,HIDE_ARIA_HIDDEN),5),u=(a[0],a[1],a[2],a[3]);a[4];for(var c in u)(r=c.node_element)&&r.nodeType===Node.ELEMENT_NODE&&(l.add(new be(c.node_element,id_counter,0)),c.node_element.addEventListener("mouseover",(function(){le("Description:",meta,"\n\n\n")})));le("segmentGroups",l,"\n\n\n\n\n");var d=l.uniquify().sort();le("uniqueSegments",d,"\n\n\n\n\n");var s=new pe(d).group(i);le("finalSegmentGroups",s,"\n\n\n\n\n");var f=s.serialize();le("segmentGroupsInput",f,"\n\n\n\n\n"),ye(o,f,i)}return r})()));